// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Slider from "../../../ui/Slider.res.mjs";
import * as Core__Option from "@rescript/core/src/Core__Option.res.mjs";
import * as DropdownMenu from "../../../ui/DropdownMenu.res.mjs";
import * as JsxRuntime from "react/jsx-runtime";
import * as Outline from "@heroicons/react/24/outline";

function AddCueMenu(props) {
  var onSplitPreviewChange = props.onSplitPreviewChange;
  var onSplit = props.onSplit;
  var onAddAfter = props.onAddAfter;
  var onAddBefore = props.onAddBefore;
  var hasPauseAfter = props.hasPauseAfter;
  var hasPauseBefore = props.hasPauseBefore;
  var match = React.useState(function () {
        return false;
      });
  var setIsOpen = match[1];
  var isOpen = match[0];
  var match$1 = React.useState(function () {
        
      });
  var setSplitPreview = match$1[1];
  var splitPreview = match$1[0];
  var wordCount = props.wordChunks.length;
  var canSplit = wordCount >= 2;
  React.useEffect((function () {
          if (!isOpen) {
            setSplitPreview(function (param) {
                  
                });
            onSplitPreviewChange(undefined);
          }
          
        }), [isOpen]);
  React.useEffect((function () {
          onSplitPreviewChange(splitPreview);
        }), [splitPreview]);
  return JsxRuntime.jsxs(DropdownMenu.Root.make, {
              children: [
                JsxRuntime.jsx(DropdownMenu.Trigger.make, {
                      children: JsxRuntime.jsx("button", {
                            children: JsxRuntime.jsx(Outline.AdjustmentsVerticalIcon, {
                                  className: "size-5 text-orange-500"
                                }),
                            className: "absolute -bottom-4 right-1 rounded-full bg-zinc-900 border-2 border-orange-500 p-2 shadow-lg transition-all opacity-0 scale-90 group-focus-within:opacity-100 group-focus-within:scale-100 hover:scale-115 hover:bg-zinc-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-400 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-900 z-50",
                            type: "button"
                          }),
                      asChild: true
                    }),
                JsxRuntime.jsxs(DropdownMenu.Content.make, {
                      children: [
                        JsxRuntime.jsx(DropdownMenu.Label.make, {
                              children: "Add or split cue"
                            }),
                        JsxRuntime.jsx(DropdownMenu.Item.make, {
                              children: JsxRuntime.jsxs("span", {
                                    children: [
                                      JsxRuntime.jsx(Outline.ArrowUpLeftIcon, {
                                            className: "size-4"
                                          }),
                                      "Add cue before"
                                    ],
                                    className: "flex items-center gap-2"
                                  }),
                              onClick: (function () {
                                  onAddBefore();
                                  setIsOpen(function (param) {
                                        return false;
                                      });
                                }),
                              disabled: !hasPauseBefore
                            }),
                        hasPauseBefore ? null : JsxRuntime.jsx("div", {
                                children: "No pause gap available",
                                className: "px-3 py-1 text-xs text-zinc-500"
                              }),
                        JsxRuntime.jsx(DropdownMenu.Item.make, {
                              children: JsxRuntime.jsxs("span", {
                                    children: [
                                      JsxRuntime.jsx(Outline.ArrowDownLeftIcon, {
                                            className: "size-4"
                                          }),
                                      "Add cue after"
                                    ],
                                    className: "flex items-center gap-2"
                                  }),
                              onClick: (function () {
                                  onAddAfter();
                                  setIsOpen(function (param) {
                                        return false;
                                      });
                                }),
                              disabled: !hasPauseAfter
                            }),
                        hasPauseAfter ? null : JsxRuntime.jsx("div", {
                                children: "No pause gap available",
                                className: "px-3 py-1 text-xs text-zinc-500"
                              }),
                        JsxRuntime.jsx(DropdownMenu.Separator.make, {}),
                        canSplit ? JsxRuntime.jsxs(JsxRuntime.Fragment, {
                                children: [
                                  JsxRuntime.jsx(DropdownMenu.Label.make, {
                                        children: JsxRuntime.jsxs("span", {
                                              children: [
                                                JsxRuntime.jsx(Outline.ScissorsIcon, {
                                                      className: "size-4"
                                                    }),
                                                "Split current cue"
                                              ],
                                              className: "flex items-center gap-2"
                                            })
                                      }),
                                  JsxRuntime.jsxs("div", {
                                        children: [
                                          JsxRuntime.jsx(Slider.make, {
                                                onValueChange: (function (v) {
                                                    setSplitPreview(function (param) {
                                                          return v;
                                                        });
                                                  }),
                                                value: Core__Option.getOr(splitPreview, wordCount / 2 | 0),
                                                min: 1,
                                                max: wordCount,
                                                step: 1
                                              }),
                                          JsxRuntime.jsx("button", {
                                                children: "Split",
                                                className: "w-full py-1.5 px-3 rounded-lg bg-orange-500 hover:bg-orange-400 text-white text-sm font-medium transition-colors",
                                                type: "button",
                                                onClick: (function (param) {
                                                    onSplit(Core__Option.getOr(splitPreview, wordCount / 2 | 0));
                                                    setIsOpen(function (param) {
                                                          return false;
                                                        });
                                                  })
                                              })
                                        ],
                                        className: "flex flex-col gap-2 p-3 min-w-48"
                                      })
                                ]
                              }) : JsxRuntime.jsx("div", {
                                children: "Need at least 2 words to split",
                                className: "px-3 py-2 text-xs text-zinc-500"
                              })
                      ],
                      sideOffset: 8,
                      align: "end"
                    })
              ],
              open: isOpen,
              onOpenChange: (function (v) {
                  setIsOpen(function (param) {
                        return v;
                      });
                })
            });
}

var make = AddCueMenu;

export {
  make ,
}
/* react Not a pure module */
